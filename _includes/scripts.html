<script>
(function (window, document){
  var menu = document.getElementById('menu'),
      WINDOW_CHANGE_EVENT = ('onorientationchange' in window) ? 'orientationchange':'resize';

  function toggleHorizontal(){
    [].forEach.call(
      document.getElementById('menu').querySelectorAll('.custom-can-transform'),
      function (el){
        el.classList.toggle('pure-menu-horizontal');
      }
    );
  }

  function toggleMenu() {
    toggleHorizontal();
    menu.classList.toggle('open');
    document.getElementById('toggle').classList.toggle('x');
  }

  document.getElementById('toggle').addEventListener('click', function(evt){
    toggleMenu();
    evt.preventDefault();
  });

  window.addEventListener(WINDOW_CHANGE_EVENT, function(){
    if (menu.classList.contains('open')){
      toggleMenu();
    }
  });
})(this, this.document);
</script>
</body>
</html>
